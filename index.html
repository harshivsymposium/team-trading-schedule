<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Trading Schedule Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Spline+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0a0e17;
            --bg-card: #12182b;
            --accent-gold: #f5c842;
            --accent-green: #00ff88;
            --accent-red: #ff3366;
            --text-primary: #ffffff;
            --text-secondary: #8b92b3;
            --border: #1e2742;
        }

        [data-theme="light"] {
            --bg-dark: #f5f7fa;
            --bg-card: #ffffff;
            --accent-gold: #f5a623;
            --accent-green: #00c853;
            --accent-red: #e53935;
            --text-primary: #1a1a1a;
            --text-secondary: #616161;
            --border: #e0e0e0;
        }

        body {
            font-family: 'Spline Sans', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 20px;
            transition: all 0.3s ease;
        }

        body[data-theme="dark"] {
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(245, 200, 66, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 255, 136, 0.03) 0%, transparent 50%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Top Bar */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 15px;
        }

        .live-clock {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5em;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .current-session-badge {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--accent-green), #00d97e);
            color: var(--bg-dark);
            border-radius: 8px;
            font-weight: 700;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 136, 0.4); }
            50% { box-shadow: 0 0 40px rgba(0, 255, 136, 0.8); }
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .btn:hover {
            transform: translateY(-2px);
            border-color: var(--accent-gold);
            box-shadow: 0 5px 15px rgba(245, 200, 66, 0.3);
        }

        .btn.active {
            background: var(--accent-gold);
            color: var(--bg-dark);
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px 20px;
            background: linear-gradient(135deg, var(--bg-card), #1a2238);
            border-radius: 16px;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        [data-theme="light"] .header {
            background: linear-gradient(135deg, #ffffff, #f5f7fa);
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(245, 200, 66, 0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--accent-gold), #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1em;
            font-family: 'JetBrains Mono', monospace;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .stat-card .label {
            font-size: 0.9em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: 700;
            color: var(--accent-gold);
            font-family: 'JetBrains Mono', monospace;
        }

        .stat-card.green .value {
            color: var(--accent-green);
        }

        .stat-card.red .value {
            color: var(--accent-red);
        }

        /* Team Info */
        .team-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .member-card {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .member-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-gold);
            box-shadow: 0 10px 30px rgba(245, 200, 66, 0.2);
        }

        .member-card .icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .member-card .name {
            font-size: 1.3em;
            font-weight: 700;
            color: var(--accent-gold);
            margin-bottom: 5px;
        }

        .member-card .role {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        /* Sessions */
        .session {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .session::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--accent-gold), var(--accent-green));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .session:hover::before {
            opacity: 1;
        }

        .session.active-now {
            border: 2px solid var(--accent-green);
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.05), var(--bg-card));
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.2);
        }

        .session.no-trade {
            border-left: 4px solid var(--accent-red);
            background: linear-gradient(135deg, var(--bg-card), rgba(255, 51, 102, 0.05));
        }

        [data-theme="light"] .session.no-trade {
            background: linear-gradient(135deg, #ffffff, #ffebee);
        }

        .session-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .time-badge {
            background: linear-gradient(135deg, var(--accent-gold), #ffed4e);
            color: var(--bg-dark);
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1em;
            box-shadow: 0 4px 15px rgba(245, 200, 66, 0.3);
        }

        .now-badge {
            background: linear-gradient(135deg, var(--accent-green), #00d97e);
            padding: 5px 15px;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: 700;
            animation: blink 1.5s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .session-title {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-primary);
        }

        .session-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .info-box {
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        [data-theme="light"] .info-box {
            background: rgba(0, 0, 0, 0.02);
        }

        .info-box h4 {
            color: var(--accent-gold);
            margin-bottom: 10px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .info-box ul {
            list-style: none;
        }

        .info-box li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }

        .info-box li::before {
            content: '‚ñ∏';
            position: absolute;
            left: 0;
            color: var(--accent-green);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal.show {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 16px;
            border: 1px solid var(--border);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            color: var(--accent-gold);
        }

        .close-btn {
            font-size: 1.5em;
            cursor: pointer;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: var(--accent-red);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'Spline Sans', sans-serif;
            font-size: 1em;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-gold), #ffed4e);
            color: var(--bg-dark);
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(245, 200, 66, 0.4);
        }

        /* Journal Entries */
        .journal-entry {
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border);
            margin-bottom: 15px;
        }

        [data-theme="light"] .journal-entry {
            background: rgba(0, 0, 0, 0.02);
        }

        .journal-entry.profit {
            border-left: 4px solid var(--accent-green);
        }

        .journal-entry.loss {
            border-left: 4px solid var(--accent-red);
        }

        .journal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .journal-pnl {
            font-weight: 700;
            font-size: 1.2em;
            font-family: 'JetBrains Mono', monospace;
        }

        .journal-pnl.positive {
            color: var(--accent-green);
        }

        .journal-pnl.negative {
            color: var(--accent-red);
        }

        /* Risk Calculator */
        .calculator-result {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--accent-green);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .calculator-result h3 {
            color: var(--accent-green);
            margin-bottom: 15px;
        }

        .calc-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }

        .calc-row:last-child {
            border-bottom: none;
        }

        /* Market Status */
        .market-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .market-card {
            background: var(--bg-card);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border);
            text-align: center;
        }

        .market-card.open {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.05), var(--bg-card));
        }

        .market-card.closed {
            border-color: var(--accent-red);
            opacity: 0.6;
        }

        .market-name {
            font-weight: 700;
            margin-bottom: 5px;
        }

        .market-time {
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        /* Rules Section */
        .rules-section {
            background: linear-gradient(135deg, rgba(255, 51, 102, 0.1), var(--bg-card));
            border: 2px solid var(--accent-red);
            border-radius: 16px;
            padding: 30px;
            margin-top: 30px;
        }

        [data-theme="light"] .rules-section {
            background: linear-gradient(135deg, #ffebee, #ffffff);
        }

        .rules-section h2 {
            color: var(--accent-red);
            margin-bottom: 20px;
            font-size: 1.8em;
            text-transform: uppercase;
        }

        .rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .rule-item {
            background: rgba(255, 51, 102, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 51, 102, 0.3);
            font-weight: 600;
        }

        /* Summary Table */
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
        }

        .summary-table th {
            background: linear-gradient(135deg, var(--accent-gold), #ffed4e);
            color: var(--bg-dark);
            padding: 15px;
            text-align: left;
            font-weight: 700;
        }

        .summary-table td {
            padding: 15px;
            border-bottom: 1px solid var(--border);
        }

        .summary-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        [data-theme="light"] .summary-table tr:hover {
            background: rgba(0, 0, 0, 0.02);
        }

        /* Final Message */
        .final-message {
            text-align: center;
            font-size: 1.3em;
            font-weight: 700;
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(245, 200, 66, 0.1));
            border-radius: 16px;
            border: 2px solid var(--accent-green);
            color: var(--accent-green);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .live-clock {
                font-size: 1.2em;
            }

            .session-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .summary-table {
                font-size: 0.9em;
            }

            .summary-table th,
            .summary-table td {
                padding: 10px;
            }

            .controls {
                width: 100%;
            }

            .btn {
                flex: 1;
                min-width: 120px;
            }
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 2px;
        }

        .badge.active {
            background: rgba(0, 255, 136, 0.2);
            color: var(--accent-green);
            border: 1px solid var(--accent-green);
        }

        .badge.market {
            background: rgba(245, 200, 66, 0.2);
            color: var(--accent-gold);
            border: 1px solid var(--accent-gold);
        }

        .emoji-icon {
            font-size: 1.2em;
            margin-right: 8px;
        }

        /* Notification Permission */
        .notification-prompt {
            background: var(--bg-card);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--accent-gold);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }

        .notification-prompt.hidden {
            display: none;
        }
    </style>
</head>
<body data-theme="dark">
    <div class="container">
        <!-- Top Bar with Live Clock -->
        <div class="top-bar">
            <div class="live-clock" id="liveClock">00:00:00</div>
            <div class="current-session-badge" id="currentSession">Loading...</div>
            <div class="controls">
                <button class="btn" id="themeToggle">üåì Theme</button>
                <button class="btn" id="journalBtn">üìù Journal</button>
                <button class="btn" id="calculatorBtn">üßÆ Calculator</button>
                <button class="btn" id="statsBtn">üìä Stats</button>
                <button class="btn" id="alertBtn">üîî Alerts</button>
                <button class="btn" id="downloadGuideBtn">üì• User Guide</button>
            </div>
        </div>

        <!-- Notification Prompt -->
        <div class="notification-prompt" id="notificationPrompt">
            <div>
                <strong>üîî Enable Session Alerts</strong>
                <p style="font-size: 0.9em; color: var(--text-secondary); margin-top: 5px;">Get notified 10 minutes before each trading session starts</p>
            </div>
            <button class="btn" id="enableNotifications">Enable</button>
        </div>

        <!-- Weekly Review Reminder -->
        <div class="notification-prompt hidden" id="weeklyReviewPrompt" style="border-color: var(--accent-green);">
            <div>
                <strong>üìä Weekly Review Pending</strong>
                <p style="font-size: 0.9em; color: var(--text-secondary); margin-top: 5px;">
                    Review your stats, analyze mistakes, and plan for next week
                </p>
            </div>
            <button class="btn" id="completeReview">Mark Complete</button>
        </div>

        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>üß† TEAM TRADING SCHEDULE PRO</h1>
                <p class="subtitle">üìç Surat | üéØ XAUUSD ‚Ä¢ NIFTY ‚Ä¢ BANKNIFTY ‚Ä¢ Stocks</p>
                <p style="margin-top: 10px; font-size: 0.9em; color: var(--text-secondary);">
                    <strong style="color: var(--accent-gold);">Harshiv Symposium LLP</strong>
                </p>
            </div>
        </div>

        <!-- Market Status -->
        <div class="market-status">
            <div class="market-card" id="xauusdStatus">
                <div class="market-name">üí∞ XAUUSD</div>
                <div class="market-time">Status: Checking...</div>
            </div>
            <div class="market-card" id="niftyStatus">
                <div class="market-name">üáÆüá≥ NIFTY</div>
                <div class="market-time">09:20 - 15:30</div>
            </div>
            <div class="market-card" id="bankniftyStatus">
                <div class="market-name">üè¶ BANKNIFTY</div>
                <div class="market-time">09:20 - 15:30</div>
            </div>
        </div>

        <!-- Dashboard Stats -->
        <div class="dashboard-grid">
            <div class="stat-card green">
                <div class="label">Win Rate</div>
                <div class="value" id="winRate">0%</div>
            </div>
            <div class="stat-card">
                <div class="label">Total Trades</div>
                <div class="value" id="totalTrades">0</div>
            </div>
            <div class="stat-card green">
                <div class="label">Total P&L</div>
                <div class="value" id="totalPnL">‚Çπ0</div>
            </div>
            <div class="stat-card">
                <div class="label">Best Performer</div>
                <div class="value" id="bestPerformer" style="font-size: 1.2em;">-</div>
            </div>
        </div>

        <!-- Team Members -->
        <div class="team-info">
            <div class="member-card">
                <div class="icon">üöï</div>
                <div class="name">Rizwan</div>
                <div class="role">Rickshaw Driver | Asian & London Sessions</div>
            </div>
            <div class="member-card">
                <div class="icon">üè•</div>
                <div class="name">Sajid</div>
                <div class="role">OT Assistant | Asian & NY Sessions</div>
            </div>
            <div class="member-card">
                <div class="icon">üåô</div>
                <div class="name">Jignesh</div>
                <div class="role">ICU Nurse - Night Duty | Index & NY Sessions</div>
            </div>
            <div class="member-card">
                <div class="icon">üëë</div>
                <div class="name">Paresh</div>
                <div class="role">Full-time Lead | Overall Risk Manager</div>
            </div>
        </div>

        <!-- Sessions -->
        <div id="sessionsContainer">
            <!-- Asian Session -->
            <div class="session" data-start="06:00" data-end="09:00">
                <div class="session-header">
                    <div class="time-badge">‚è∞ 06:00 AM ‚Äì 09:00 AM</div>
                    <div class="session-title">üåè ASIAN SESSION</div>
                </div>
                <div class="session-content">
                    <div class="info-box">
                        <h4>üë• ACTIVE MEMBERS</h4>
                        <ul>
                            <li>‚úÖ Rizwan (ghar se)</li>
                            <li>‚úÖ Sajid (ghar se)</li>
                            <li>üëë Paresh (light monitoring)</li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üéØ MARKET</h4>
                        <ul>
                            <li><span class="badge market">XAUUSD ONLY</span></li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üß† ROLES</h4>
                        <ul>
                            <li>Rizwan ‚Üí Trade execution</li>
                            <li>Sajid ‚Üí Levels + confirmation</li>
                            <li>Paresh ‚Üí Risk ON/OFF decision</li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üìå RULES</h4>
                        <ul>
                            <li>Max 1 trade per person</li>
                            <li>Small target (Asian range)</li>
                            <li>‚ùå Overtrading nahi</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Transition -->
            <div class="session no-trade" data-start="09:00" data-end="09:20">
                <div class="session-header">
                    <div class="time-badge">‚è∞ 09:00 AM ‚Äì 09:20 AM</div>
                    <div class="session-title">üîÅ TRANSITION SLOT</div>
                </div>
                <div class="session-content">
                    <div class="info-box">
                        <h4>‚õî NO TRADING</h4>
                        <ul>
                            <li>Gold band</li>
                            <li>Indian market key levels check</li>
                            <li>‚ùå No trades during transition</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Indian Market -->
            <div class="session" data-start="09:20" data-end="11:00">
                <div class="session-header">
                    <div class="time-badge">‚è∞ 09:20 AM ‚Äì 11:00 AM</div>
                    <div class="session-title">üáÆüá≥ INDIAN MARKET SESSION</div>
                </div>
                <div class="session-content">
                    <div class="info-box">
                        <h4>üë• ACTIVE MEMBERS</h4>
                        <ul>
                            <li>üëë Paresh (Lead)</li>
                            <li>üåô Jignesh (Support)</li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üéØ MARKET</h4>
                        <ul>
                            <li><span class="badge market">NIFTY</span></li>
                            <li><span class="badge market">BANKNIFTY</span></li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üß† ROLES</h4>
                        <ul>
                            <li>Paresh ‚Üí Entry & exit</li>
                            <li>Jignesh ‚Üí HTF bias + structure</li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üìå RULES</h4>
                        <ul>
                            <li>1‚Äì2 sniper trades only</li>
                            <li>üî¥ 11:00 AM HARD STOP</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- No Trade Zone -->
            <div class="session no-trade" data-start="11:00" data-end="13:30">
                <div class="session-header">
                    <div class="time-badge">‚è∞ 11:00 AM ‚Äì 01:30 PM</div>
                    <div class="session-title">‚õî NO TRADE ZONE</div>
                </div>
                <div class="session-content">
                    <div class="info-box">
                        <h4>üö´ EVERYONE OFF</h4>
                        <ul>
                            <li>Paresh ‚Üí Child duty</li>
                            <li>Rizwan ‚Üí Office</li>
                            <li>Sajid ‚Üí OT / travel</li>
                            <li>Jignesh ‚Üí Sleep</li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üí° IMPORTANT</h4>
                        <ul>
                            <li>‚ùå No guilt</li>
                            <li>‚ùå No trades</li>
                            <li>Life comes first</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- London Session -->
            <div class="session" data-start="13:30" data-end="16:30">
                <div class="session-header">
                    <div class="time-badge">‚è∞ 01:30 PM ‚Äì 04:30 PM</div>
                    <div class="session-title">üåç LONDON SESSION</div>
                </div>
                <div class="session-content">
                    <div class="info-box">
                        <h4>üë• ACTIVE MEMBERS</h4>
                        <ul>
                            <li>üöï Rizwan (office)</li>
                            <li>üëë Paresh</li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üéØ MARKET</h4>
                        <ul>
                            <li><span class="badge market">XAUUSD PRIMARY</span></li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üß† ROLES</h4>
                        <ul>
                            <li>Rizwan ‚Üí Execution</li>
                            <li>Paresh ‚Üí Final approval</li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üìå RULE</h4>
                        <ul>
                            <li>üî¥ Rizwan exit at 4:30 PM sharp</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Cool Down -->
            <div class="session" data-start="16:30" data-end="17:00">
                <div class="session-header">
                    <div class="time-badge">‚è∞ 04:30 PM ‚Äì 05:00 PM</div>
                    <div class="session-title">üîΩ COOL DOWN</div>
                </div>
                <div class="session-content">
                    <div class="info-box">
                        <h4>üìä ACTIVITIES</h4>
                        <ul>
                            <li>Trade management only</li>
                            <li>Position review</li>
                            <li>‚ùå No fresh entries</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Sajid Prep -->
            <div class="session" data-start="17:00" data-end="18:00">
                <div class="session-header">
                    <div class="time-badge">‚è∞ 05:00 PM ‚Äì 06:00 PM</div>
                    <div class="session-title">üè• SAJID PREP SLOT</div>
                </div>
                <div class="session-content">
                    <div class="info-box">
                        <h4>üë• ACTIVE</h4>
                        <ul>
                            <li>‚úÖ Sajid (home setup)</li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üéØ WHAT HE DOES</h4>
                        <ul>
                            <li>XAUUSD HTF bias</li>
                            <li>NY liquidity zones</li>
                            <li>News check</li>
                            <li>"TRADE / NO-TRADE" message</li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üìå NOTE</h4>
                        <ul>
                            <li>‚ùå Live trading nahi</li>
                            <li>Analysis & prep only</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- NY Session -->
            <div class="session" data-start="20:00" data-end="22:30">
                <div class="session-header">
                    <div class="time-badge">‚è∞ 08:00 PM ‚Äì 10:30 PM</div>
                    <div class="session-title">üåé NEW YORK SESSION</div>
                </div>
                <div class="session-content">
                    <div class="info-box">
                        <h4>üë• ACTIVE MEMBERS</h4>
                        <ul>
                            <li>üè• Sajid (Lead)</li>
                            <li>üåô Jignesh (Confirmation)</li>
                            <li>üëë Paresh (Risk control ‚Äì optional)</li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üéØ MARKET</h4>
                        <ul>
                            <li><span class="badge market">XAUUSD ONLY</span></li>
                        </ul>
                    </div>
                    <div class="info-box">
                        <h4>üìå RULES</h4>
                        <ul>
                            <li>Max 2 trades total</li>
                            <li>Strict SL</li>
                            <li>üî¥ 10:30 PM HARD STOP</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summary Table -->
        <div style="margin-top: 40px;">
            <h2 style="color: var(--accent-gold); margin-bottom: 20px; font-size: 2em;">üìä PERSON-WISE SUMMARY</h2>
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Market</th>
                        <th>Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="emoji-icon">üöï</span><strong>Rizwan</strong></td>
                        <td>XAUUSD</td>
                        <td>06:00‚Äì09:00 & 01:30‚Äì04:30</td>
                    </tr>
                    <tr>
                        <td><span class="emoji-icon">üè•</span><strong>Sajid</strong></td>
                        <td>XAUUSD</td>
                        <td>06:00‚Äì09:00 & 08:00‚Äì10:30</td>
                    </tr>
                    <tr>
                        <td><span class="emoji-icon">üåô</span><strong>Jignesh</strong></td>
                        <td>Index + Gold</td>
                        <td>09:20‚Äì11:00 & Night</td>
                    </tr>
                    <tr>
                        <td><span class="emoji-icon">üëë</span><strong>Paresh</strong></td>
                        <td>Lead</td>
                        <td>Morning + Index + London</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Rules Section -->
        <div class="rules-section">
            <h2>üîí NON-NEGOTIABLE RULES</h2>
            <div class="rules-grid">
                <div class="rule-item">
                    <strong>1.</strong> Ek session = ek leader
                </div>
                <div class="rule-item">
                    <strong>2.</strong> 2 losses = session stop
                </div>
                <div class="rule-item">
                    <strong>3.</strong> Sab ek hi entry nahi lenge
                </div>
                <div class="rule-item">
                    <strong>4.</strong> Daily journal mandatory
                </div>
                <div class="rule-item" style="background: rgba(255, 51, 102, 0.2); border: 2px solid var(--accent-red);">
                    <strong>üõë 5. DAILY MAX LOSS = 2% ACCOUNT</strong><br>
                    <span style="font-size: 0.9em;">Hit hua = poora din band</span>
                </div>
            </div>
        </div>

        <!-- Final Message -->
        <div class="final-message">
            üèÅ "Trading follows the schedule ‚Äî life does not follow trading."<br>
            <br>
            üíé "Trade by schedule. Live by choice."
        </div>

        <!-- SEBI Disclaimer -->
        <div style="margin-top: 40px; padding: 20px; background: rgba(255, 255, 255, 0.03); border-radius: 12px; border: 1px solid var(--border); font-size: 0.85em; color: var(--text-secondary); text-align: center;">
            <strong style="color: var(--accent-gold);">‚öñÔ∏è EDUCATIONAL DISCLAIMER</strong><br><br>
            This tool is for educational and organizational purposes only. It is NOT investment advice or a recommendation to trade. 
            Trading in financial markets involves substantial risk of loss. Past performance does not guarantee future results. 
            Users are solely responsible for their trading decisions and should consult with qualified financial advisors before making any investment decisions.
            <br><br>
            <strong>Investment in securities market are subject to market risks. Read all the related documents carefully before investing.</strong>
            <br><br>
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border);">
                <strong style="color: var(--accent-gold);">¬© Harshiv Symposium LLP</strong><br>
                Surat, Gujarat
            </div>
        </div>
    </div>

    <!-- Journal Modal -->
    <div class="modal" id="journalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìù Trading Journal</h2>
                <span class="close-btn" onclick="closeModal('journalModal')">&times;</span>
            </div>
            
            <form id="journalForm">
                <div class="form-group">
                    <label>Trader Name</label>
                    <select id="traderName" required>
                        <option value="">Select Trader</option>
                        <option value="Rizwan">üöï Rizwan</option>
                        <option value="Sajid">üè• Sajid</option>
                        <option value="Jignesh">üåô Jignesh</option>
                        <option value="Paresh">üëë Paresh</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Session</label>
                    <select id="session" required>
                        <option value="">Select Session</option>
                        <option value="Asian">üåè Asian (06:00-09:00)</option>
                        <option value="Indian">üáÆüá≥ Indian (09:20-11:00)</option>
                        <option value="London">üåç London (01:30-04:30)</option>
                        <option value="NY">üåé NY (08:00-10:30)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Market</label>
                    <select id="market" required>
                        <option value="">Select Market</option>
                        <option value="XAUUSD">üí∞ XAUUSD</option>
                        <option value="NIFTY">üáÆüá≥ NIFTY</option>
                        <option value="BANKNIFTY">üè¶ BANKNIFTY</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Trade Type</label>
                    <select id="tradeType" required>
                        <option value="">Select Type</option>
                        <option value="Regular">‚úÖ Regular Trade</option>
                        <option value="No Setup">‚õî No Setup Day</option>
                        <option value="News Day">üì∞ News Day (Avoided)</option>
                        <option value="Emotional">üòµ Emotional Day (Skip)</option>
                        <option value="Max Loss Hit">üõë Max Loss Hit (Stopped)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>P&L (‚Çπ)</label>
                    <input type="number" id="pnl" placeholder="Enter profit (+) or loss (-)" required>
                </div>
                
                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="notes" placeholder="What went well? What can be improved?"></textarea>
                </div>
                
                <button type="submit" class="btn-primary">üíæ Save Entry</button>
            </form>
            
            <div style="margin-top: 30px;">
                <h3 style="color: var(--accent-gold); margin-bottom: 15px;">Recent Entries</h3>
                <div id="journalEntries"></div>
            </div>
        </div>
    </div>

    <!-- Calculator Modal -->
    <div class="modal" id="calculatorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üßÆ Risk Calculator</h2>
                <span class="close-btn" onclick="closeModal('calculatorModal')">&times;</span>
            </div>
            
            <form id="calculatorForm">
                <div class="form-group">
                    <label>Account Balance (‚Çπ)</label>
                    <input type="number" id="accountBalance" placeholder="100000" value="100000" required>
                </div>
                
                <div class="form-group">
                    <label>Risk Per Trade (%)</label>
                    <input type="number" id="riskPercent" placeholder="1" value="1" step="0.1" required>
                </div>
                
                <div class="form-group">
                    <label>Entry Price</label>
                    <input type="number" id="entryPrice" placeholder="2050.00" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label>Stop Loss Price</label>
                    <input type="number" id="stopLoss" placeholder="2045.00" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label>Take Profit Price (Optional)</label>
                    <input type="number" id="takeProfit" placeholder="2065.00" step="0.01">
                </div>
                
                <button type="button" class="btn-primary" onclick="calculateRisk()">üìä Calculate</button>
            </form>
            
            <div id="calculatorResult"></div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div class="modal" id="statsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìä Trading Statistics</h2>
                <span class="close-btn" onclick="closeModal('statsModal')">&times;</span>
            </div>
            
            <div class="dashboard-grid" style="margin-bottom: 20px;">
                <div class="stat-card green">
                    <div class="label">Total Wins</div>
                    <div class="value" id="modalTotalWins">0</div>
                </div>
                <div class="stat-card red">
                    <div class="label">Total Losses</div>
                    <div class="value" id="modalTotalLosses">0</div>
                </div>
                <div class="stat-card">
                    <div class="label">Best Trade</div>
                    <div class="value" id="modalBestTrade">‚Çπ0</div>
                </div>
                <div class="stat-card">
                    <div class="label">Worst Trade</div>
                    <div class="value" id="modalWorstTrade">‚Çπ0</div>
                </div>
            </div>

            <h3 style="color: var(--accent-gold); margin: 20px 0;">Performance by Trader</h3>
            <div id="traderStats"></div>

            <h3 style="color: var(--accent-gold); margin: 20px 0;">Performance by Session</h3>
            <div id="sessionStats"></div>
        </div>
    </div>

    <!-- Alert Settings Modal -->
    <div class="modal" id="alertModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üîî Alert Settings</h2>
                <span class="close-btn" onclick="closeModal('alertModal')">&times;</span>
            </div>
            
            <div style="margin-bottom: 20px;">
                <p style="color: var(--text-secondary);">
                    Enable browser notifications to get alerts 10 minutes before each trading session starts.
                </p>
            </div>

            <div class="form-group">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                    <input type="checkbox" id="asianAlert" style="width: auto;">
                    <span>üåè Asian Session (05:50 AM)</span>
                </label>
            </div>

            <div class="form-group">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                    <input type="checkbox" id="indianAlert" style="width: auto;">
                    <span>üáÆüá≥ Indian Market (09:10 AM)</span>
                </label>
            </div>

            <div class="form-group">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                    <input type="checkbox" id="londonAlert" style="width: auto;">
                    <span>üåç London Session (01:20 PM)</span>
                </label>
            </div>

            <div class="form-group">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                    <input type="checkbox" id="nyAlert" style="width: auto;">
                    <span>üåé NY Session (07:50 PM)</span>
                </label>
            </div>

            <button class="btn-primary" onclick="saveAlertSettings()">üíæ Save Settings</button>
        </div>
    </div>

    <script>
        // ==================== CORE FUNCTIONS ====================
        
        // Initialize app
        function initApp() {
            updateClock();
            updateCurrentSession();
            updateMarketStatus();
            loadStats();
            loadJournalEntries();
            loadAlertSettings();
            checkNotificationPermission();
            checkWeeklyReview();
            
            // Update every second
            setInterval(updateClock, 1000);
            setInterval(updateCurrentSession, 30000);
            setInterval(updateMarketStatus, 60000);
            setInterval(checkSessionAlerts, 60000);
        }

        // ==================== CLOCK & SESSION ====================
        
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            document.getElementById('liveClock').textContent = `${hours}:${minutes}:${seconds}`;
        }

        function updateCurrentSession() {
            const now = new Date();
            const currentTime = now.getHours() * 60 + now.getMinutes();
            
            const sessions = [
                { name: 'üåè Asian Session', start: 6 * 60, end: 9 * 60 },
                { name: 'üîÅ Transition', start: 9 * 60, end: 9 * 60 + 20 },
                { name: 'üáÆüá≥ Indian Market', start: 9 * 60 + 20, end: 11 * 60 },
                { name: '‚õî No Trade Zone', start: 11 * 60, end: 13 * 60 + 30 },
                { name: 'üåç London Session', start: 13 * 60 + 30, end: 16 * 60 + 30 },
                { name: 'üîΩ Cool Down', start: 16 * 60 + 30, end: 17 * 60 },
                { name: 'üè• Sajid Prep', start: 17 * 60, end: 18 * 60 },
                { name: 'üåé NY Session', start: 20 * 60, end: 22 * 60 + 30 }
            ];

            let currentSessionName = 'üí§ Market Closed';
            
            for (let session of sessions) {
                if (currentTime >= session.start && currentTime < session.end) {
                    currentSessionName = session.name;
                    break;
                }
            }

            document.getElementById('currentSession').textContent = currentSessionName;

            // Highlight active session
            document.querySelectorAll('.session').forEach(session => {
                session.classList.remove('active-now');
                const start = session.dataset.start;
                const end = session.dataset.end;
                if (start && end) {
                    const [startH, startM] = start.split(':').map(Number);
                    const [endH, endM] = end.split(':').map(Number);
                    const startTime = startH * 60 + startM;
                    const endTime = endH * 60 + endM;
                    
                    if (currentTime >= startTime && currentTime < endTime) {
                        session.classList.add('active-now');
                        const nowBadge = session.querySelector('.now-badge');
                        if (!nowBadge) {
                            const badge = document.createElement('span');
                            badge.className = 'now-badge';
                            badge.textContent = '‚ñ∂ LIVE NOW';
                            session.querySelector('.session-header').appendChild(badge);
                        }
                    } else {
                        const nowBadge = session.querySelector('.now-badge');
                        if (nowBadge) nowBadge.remove();
                    }
                }
            });
        }

        function updateMarketStatus() {
            const now = new Date();
            const day = now.getDay();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const currentTime = hours * 60 + minutes;

            // XAUUSD (24/5 - closes Friday 10:30 PM to Sunday 10:00 PM IST approximately)
            const xauusdCard = document.getElementById('xauusdStatus');
            if (day === 0 || (day === 6 && currentTime < 22 * 60)) {
                xauusdCard.classList.remove('open');
                xauusdCard.classList.add('closed');
                xauusdCard.querySelector('.market-time').textContent = 'Status: Closed (Weekend)';
            } else {
                xauusdCard.classList.add('open');
                xauusdCard.classList.remove('closed');
                xauusdCard.querySelector('.market-time').textContent = 'Status: OPEN 24/5';
            }

            // NIFTY & BANKNIFTY (09:20 - 15:30 IST, Mon-Fri)
            const niftyCard = document.getElementById('niftyStatus');
            const bankniftyCard = document.getElementById('bankniftyStatus');
            
            if (day >= 1 && day <= 5 && currentTime >= 9 * 60 + 20 && currentTime < 15 * 60 + 30) {
                niftyCard.classList.add('open');
                niftyCard.classList.remove('closed');
                niftyCard.querySelector('.market-time').textContent = 'Status: OPEN';
                
                bankniftyCard.classList.add('open');
                bankniftyCard.classList.remove('closed');
                bankniftyCard.querySelector('.market-time').textContent = 'Status: OPEN';
            } else {
                niftyCard.classList.remove('open');
                niftyCard.classList.add('closed');
                niftyCard.querySelector('.market-time').textContent = 'Status: Closed';
                
                bankniftyCard.classList.remove('open');
                bankniftyCard.classList.add('closed');
                bankniftyCard.querySelector('.market-time').textContent = 'Status: Closed';
            }
        }

        // ==================== THEME TOGGLE ====================
        
        document.getElementById('themeToggle').addEventListener('click', function() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        });

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.body.setAttribute('data-theme', savedTheme);

        // ==================== MODALS ====================
        
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        // Button handlers
        document.getElementById('journalBtn').addEventListener('click', () => openModal('journalModal'));
        document.getElementById('calculatorBtn').addEventListener('click', () => openModal('calculatorModal'));
        document.getElementById('statsBtn').addEventListener('click', () => {
            updateStatsModal();
            openModal('statsModal');
        });
        document.getElementById('alertBtn').addEventListener('click', () => openModal('alertModal'));

        // Download User Guide Button
        document.getElementById('downloadGuideBtn').addEventListener('click', function() {
            // Try to open PDF in new tab
            const pdfUrl = 'Trading-Schedule-User-Guide.pdf';
            const link = document.createElement('a');
            link.href = pdfUrl;
            link.target = '_blank';
            link.download = 'Trading-Schedule-User-Guide.pdf';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Show info message
            setTimeout(() => {
                alert('üì• User Guide PDF\n\n' +
                      '‚úÖ PDF opening in new tab\n' +
                      '‚úÖ If it doesn\'t open, check:\n\n' +
                      '1. PDF file is in same folder\n' +
                      '2. GitHub Pages is enabled\n' +
                      '3. Wait 2-3 minutes after enabling\n\n' +
                      'Direct URL:\n' +
                      'https://harshivsymposium.github.io/team-trading-schedule/Trading-Schedule-User-Guide.pdf');
            }, 500);
        });

        // Close modal on outside click
        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
            }
        });

        // ==================== JOURNAL ====================
        
        document.getElementById('journalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const entry = {
                id: Date.now(),
                trader: document.getElementById('traderName').value,
                session: document.getElementById('session').value,
                market: document.getElementById('market').value,
                tradeType: document.getElementById('tradeType').value,
                pnl: parseFloat(document.getElementById('pnl').value),
                notes: document.getElementById('notes').value,
                date: new Date().toISOString()
            };

            // Save to localStorage
            const entries = getJournalEntries();
            entries.unshift(entry);
            localStorage.setItem('journalEntries', JSON.stringify(entries));

            // Reset form and reload
            this.reset();
            loadJournalEntries();
            loadStats();
            
            alert('‚úÖ Journal entry saved successfully!');
        });

        function getJournalEntries() {
            const entries = localStorage.getItem('journalEntries');
            return entries ? JSON.parse(entries) : [];
        }

        function loadJournalEntries() {
            const entries = getJournalEntries();
            const container = document.getElementById('journalEntries');
            
            if (entries.length === 0) {
                container.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 20px;">No journal entries yet. Add your first trade!</p>';
                return;
            }

            container.innerHTML = entries.slice(0, 10).map(entry => {
                const date = new Date(entry.date);
                const isProfit = entry.pnl > 0;
                const tradeTypeEmoji = entry.tradeType === 'No Setup' ? '‚õî' : 
                                       entry.tradeType === 'News Day' ? 'üì∞' : 
                                       entry.tradeType === 'Emotional' ? 'üòµ' :
                                       entry.tradeType === 'Max Loss Hit' ? 'üõë' : '‚úÖ';
                return `
                    <div class="journal-entry ${isProfit ? 'profit' : 'loss'}">
                        <div class="journal-header">
                            <div>
                                <strong>${entry.trader}</strong> ‚Ä¢ ${entry.session} ‚Ä¢ ${entry.market}
                                ${entry.tradeType ? `<br><span style="font-size: 0.85em; color: var(--text-secondary);">${tradeTypeEmoji} ${entry.tradeType}</span>` : ''}
                            </div>
                            <div class="journal-pnl ${isProfit ? 'positive' : 'negative'}">
                                ${isProfit ? '+' : ''}‚Çπ${entry.pnl.toFixed(2)}
                            </div>
                        </div>
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 8px;">
                            ${date.toLocaleDateString()} ${date.toLocaleTimeString()}
                        </div>
                        ${entry.notes ? `<div style="font-size: 0.9em;">${entry.notes}</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        // ==================== STATS ====================
        
        function loadStats() {
            const entries = getJournalEntries();
            
            if (entries.length === 0) {
                document.getElementById('winRate').textContent = '0%';
                document.getElementById('totalTrades').textContent = '0';
                document.getElementById('totalPnL').textContent = '‚Çπ0';
                document.getElementById('bestPerformer').textContent = '-';
                return;
            }

            // Calculate stats
            const wins = entries.filter(e => e.pnl > 0).length;
            const losses = entries.filter(e => e.pnl < 0).length;
            const winRate = ((wins / entries.length) * 100).toFixed(1);
            const totalPnL = entries.reduce((sum, e) => sum + e.pnl, 0);

            // Best performer
            const traderStats = {};
            entries.forEach(entry => {
                if (!traderStats[entry.trader]) {
                    traderStats[entry.trader] = 0;
                }
                traderStats[entry.trader] += entry.pnl;
            });

            const bestPerformer = Object.entries(traderStats).reduce((best, [trader, pnl]) => {
                return pnl > best.pnl ? { trader, pnl } : best;
            }, { trader: '-', pnl: 0 });

            // Update dashboard
            document.getElementById('winRate').textContent = `${winRate}%`;
            document.getElementById('totalTrades').textContent = entries.length;
            document.getElementById('totalPnL').textContent = `‚Çπ${totalPnL.toFixed(2)}`;
            document.getElementById('totalPnL').parentElement.classList.toggle('green', totalPnL > 0);
            document.getElementById('totalPnL').parentElement.classList.toggle('red', totalPnL < 0);
            document.getElementById('bestPerformer').textContent = bestPerformer.trader;
        }

        function updateStatsModal() {
            const entries = getJournalEntries();
            
            if (entries.length === 0) {
                document.getElementById('modalTotalWins').textContent = '0';
                document.getElementById('modalTotalLosses').textContent = '0';
                document.getElementById('modalBestTrade').textContent = '‚Çπ0';
                document.getElementById('modalWorstTrade').textContent = '‚Çπ0';
                document.getElementById('traderStats').innerHTML = '<p style="color: var(--text-secondary); text-align: center;">No data available</p>';
                document.getElementById('sessionStats').innerHTML = '<p style="color: var(--text-secondary); text-align: center;">No data available</p>';
                return;
            }

            const wins = entries.filter(e => e.pnl > 0);
            const losses = entries.filter(e => e.pnl < 0);
            const bestTrade = Math.max(...entries.map(e => e.pnl));
            const worstTrade = Math.min(...entries.map(e => e.pnl));

            document.getElementById('modalTotalWins').textContent = wins.length;
            document.getElementById('modalTotalLosses').textContent = losses.length;
            document.getElementById('modalBestTrade').textContent = `‚Çπ${bestTrade.toFixed(2)}`;
            document.getElementById('modalWorstTrade').textContent = `‚Çπ${worstTrade.toFixed(2)}`;

            // Trader stats
            const traderStats = {};
            entries.forEach(entry => {
                if (!traderStats[entry.trader]) {
                    traderStats[entry.trader] = { pnl: 0, trades: 0 };
                }
                traderStats[entry.trader].pnl += entry.pnl;
                traderStats[entry.trader].trades += 1;
            });

            const traderStatsHTML = Object.entries(traderStats).map(([trader, stats]) => `
                <div class="stat-card">
                    <div class="label">${trader}</div>
                    <div class="value" style="font-size: 1.5em;">${stats.trades} trades</div>
                    <div style="color: ${stats.pnl > 0 ? 'var(--accent-green)' : 'var(--accent-red)'}; font-weight: 700; margin-top: 5px;">
                        ${stats.pnl > 0 ? '+' : ''}‚Çπ${stats.pnl.toFixed(2)}
                    </div>
                </div>
            `).join('');

            document.getElementById('traderStats').innerHTML = `<div class="dashboard-grid">${traderStatsHTML}</div>`;

            // Session stats
            const sessionStats = {};
            entries.forEach(entry => {
                if (!sessionStats[entry.session]) {
                    sessionStats[entry.session] = { pnl: 0, trades: 0 };
                }
                sessionStats[entry.session].pnl += entry.pnl;
                sessionStats[entry.session].trades += 1;
            });

            const sessionStatsHTML = Object.entries(sessionStats).map(([session, stats]) => `
                <div class="stat-card">
                    <div class="label">${session}</div>
                    <div class="value" style="font-size: 1.5em;">${stats.trades} trades</div>
                    <div style="color: ${stats.pnl > 0 ? 'var(--accent-green)' : 'var(--accent-red)'}; font-weight: 700; margin-top: 5px;">
                        ${stats.pnl > 0 ? '+' : ''}‚Çπ${stats.pnl.toFixed(2)}
                    </div>
                </div>
            `).join('');

            document.getElementById('sessionStats').innerHTML = `<div class="dashboard-grid">${sessionStatsHTML}</div>`;
        }

        // ==================== RISK CALCULATOR ====================
        
        function calculateRisk() {
            const balance = parseFloat(document.getElementById('accountBalance').value);
            const riskPercent = parseFloat(document.getElementById('riskPercent').value);
            const entry = parseFloat(document.getElementById('entryPrice').value);
            const sl = parseFloat(document.getElementById('stopLoss').value);
            const tp = parseFloat(document.getElementById('takeProfit').value) || null;

            if (!balance || !riskPercent || !entry || !sl) {
                alert('Please fill all required fields!');
                return;
            }

            const riskAmount = (balance * riskPercent) / 100;
            const slDistance = Math.abs(entry - sl);
            const positionSize = riskAmount / slDistance;
            
            let rr = 'N/A';
            let potentialProfit = 0;
            
            if (tp) {
                const tpDistance = Math.abs(tp - entry);
                rr = (tpDistance / slDistance).toFixed(2);
                potentialProfit = positionSize * tpDistance;
            }

            const resultHTML = `
                <div class="calculator-result">
                    <h3>üìä Calculation Results</h3>
                    <div class="calc-row">
                        <strong>Risk Amount:</strong>
                        <span>‚Çπ${riskAmount.toFixed(2)}</span>
                    </div>
                    <div class="calc-row">
                        <strong>Position Size:</strong>
                        <span>${positionSize.toFixed(4)} lots</span>
                    </div>
                    <div class="calc-row">
                        <strong>SL Distance:</strong>
                        <span>${slDistance.toFixed(2)} points</span>
                    </div>
                    ${tp ? `
                        <div class="calc-row">
                            <strong>Risk:Reward:</strong>
                            <span>1:${rr}</span>
                        </div>
                        <div class="calc-row">
                            <strong>Potential Profit:</strong>
                            <span style="color: var(--accent-green);">‚Çπ${potentialProfit.toFixed(2)}</span>
                        </div>
                    ` : ''}
                    <div class="calc-row">
                        <strong>Max Loss:</strong>
                        <span style="color: var(--accent-red);">‚Çπ${riskAmount.toFixed(2)}</span>
                    </div>
                </div>
            `;

            document.getElementById('calculatorResult').innerHTML = resultHTML;
        }

        // ==================== NOTIFICATIONS ====================
        
        function checkNotificationPermission() {
            if ('Notification' in window) {
                if (Notification.permission === 'default') {
                    document.getElementById('notificationPrompt').classList.remove('hidden');
                } else if (Notification.permission === 'granted') {
                    document.getElementById('notificationPrompt').classList.add('hidden');
                }
            }
        }

        document.getElementById('enableNotifications').addEventListener('click', async function() {
            if ('Notification' in window) {
                const permission = await Notification.requestPermission();
                if (permission === 'granted') {
                    document.getElementById('notificationPrompt').classList.add('hidden');
                    new Notification('üéâ Alerts Enabled!', {
                        body: 'You will now receive trading session alerts',
                        icon: 'üîî'
                    });
                }
            }
        });

        function loadAlertSettings() {
            const settings = JSON.parse(localStorage.getItem('alertSettings') || '{}');
            document.getElementById('asianAlert').checked = settings.asian || false;
            document.getElementById('indianAlert').checked = settings.indian || false;
            document.getElementById('londonAlert').checked = settings.london || false;
            document.getElementById('nyAlert').checked = settings.ny || false;
        }

        function saveAlertSettings() {
            const settings = {
                asian: document.getElementById('asianAlert').checked,
                indian: document.getElementById('indianAlert').checked,
                london: document.getElementById('londonAlert').checked,
                ny: document.getElementById('nyAlert').checked
            };
            localStorage.setItem('alertSettings', JSON.stringify(settings));
            closeModal('alertModal');
            alert('‚úÖ Alert settings saved!');
        }

        function checkSessionAlerts() {
            if (Notification.permission !== 'granted') return;

            const settings = JSON.parse(localStorage.getItem('alertSettings') || '{}');
            const now = new Date();
            const currentTime = now.getHours() * 60 + now.getMinutes();

            const alerts = [
                { name: 'Asian', time: 5 * 60 + 50, enabled: settings.asian, title: 'üåè Asian Session Starting Soon!', body: 'Asian session starts in 10 minutes' },
                { name: 'Indian', time: 9 * 60 + 10, enabled: settings.indian, title: 'üáÆüá≥ Indian Market Opening Soon!', body: 'Indian market opens in 10 minutes' },
                { name: 'London', time: 13 * 60 + 20, enabled: settings.london, title: 'üåç London Session Starting Soon!', body: 'London session starts in 10 minutes' },
                { name: 'NY', time: 19 * 60 + 50, enabled: settings.ny, title: 'üåé NY Session Starting Soon!', body: 'NY session starts in 10 minutes' }
            ];

            const sentAlerts = JSON.parse(localStorage.getItem('sentAlerts') || '[]');
            const today = now.toDateString();

            alerts.forEach(alert => {
                if (alert.enabled && currentTime === alert.time) {
                    const alertKey = `${today}-${alert.name}`;
                    if (!sentAlerts.includes(alertKey)) {
                        new Notification(alert.title, {
                            body: alert.body,
                            icon: 'üîî',
                            requireInteraction: true
                        });
                        sentAlerts.push(alertKey);
                        localStorage.setItem('sentAlerts', JSON.stringify(sentAlerts));
                    }
                }
            });

            // Clear old alerts
            const validAlerts = sentAlerts.filter(key => key.startsWith(today));
            localStorage.setItem('sentAlerts', JSON.stringify(validAlerts));
        }

        // ==================== INITIALIZATION ====================
        
        window.addEventListener('DOMContentLoaded', initApp);

        // Weekly Review Reminder
        function checkWeeklyReview() {
            const now = new Date();
            const dayOfWeek = now.getDay(); // 0 = Sunday, 6 = Saturday
            const lastReview = localStorage.getItem('lastWeeklyReview');
            
            // Show reminder on Sunday
            if (dayOfWeek === 0) {
                const today = now.toDateString();
                if (!lastReview || lastReview !== today) {
                    document.getElementById('weeklyReviewPrompt').classList.remove('hidden');
                }
            }
        }

        document.getElementById('completeReview').addEventListener('click', function() {
            const today = new Date().toDateString();
            localStorage.setItem('lastWeeklyReview', today);
            document.getElementById('weeklyReviewPrompt').classList.add('hidden');
            alert('‚úÖ Weekly review marked complete! See you next Sunday.');
        });
    </script>
</body>
</html>